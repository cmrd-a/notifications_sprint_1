http://localhost:15672/ - rabbit manage



 - 
 - Спроектируйте сервис email-рассылок с учётом потенциального расширения количества способов связи.
 - Настройте отправку одинаковых писем всем пользователям.
 - Настройте отправку персонифицированных писем.
 - Отправляйте приветственное письмо после регистрации пользователя.


<div class="Markdown base-markdown base-markdown_with-gallery markdown markdown_size_normal markdown_type_theory full-markdown"><h1>Задание</h1><div class="paragraph">Спроектируйте ваш сервис уведомлений и отправьте наставнику на проверку.</div><div class="paragraph">Повторим, какие возможные компоненты есть в системе нотификации:</div><ol start="1"><li>База, в которой хранятся уведомления <code class="code-inline code-inline_theme_light">notification_id</code> и <code class="code-inline code-inline_theme_light">content_id</code>.</li><li>API для приёма событий по созданию уведомлений (а может стоит через него управлять и уведомлениями в базе?):
<ul><li>API процесс;</li><li>база, в которой хранится история отправки уведомлений (а может и не здесь).</li></ul></li><li>Процесс, который отправляет уведомление (воркер):
<ul><li>База, в которой хранится история отправки уведомлений (а может и не здесь).</li></ul></li><li>Генератор автоматических событий:
<ul><li>шедулер;</li><li>cron;</li><li>база, в которой хранится периодичность уведомлений (а лучше бы это была одна база с п. 1).</li></ul></li><li>Админ-панель.</li></ol><h2>Задание 1</h2><div class="paragraph">В уроке рассматривались два варианта подготовки данных для отправки уведомлений: собирать данные до воркера и отправлять их в него или собирать данные в самом воркере.</div><div class="paragraph">Лучше всего использовать третий вариант — гибридный.</div><div class="paragraph">Спроектируйте и распишите гибридный формат работы API, воркера, генератора автоматических уведомлений и админ-панели для трёх сценариев:</div><ol start="1"><li>Любая часть сайта просит отправить мгновенное уведомление.</li><li>Генератор автоматических событий сгенерировал событие или события на большую группу пользователей.</li><li>Админ-панель, в которой менеджеры вручную создали рассылку уведомлений пользователям.</li></ol><h2>Задание 2</h2><div class="paragraph">Спроектируйте сервис уведомлений. Используйте готовые компоненты и подходы из урока, <a href="https://practicum.yandex.ru/learn/middle-python/courses/cb9f2aa3-7bad-4ff4-8385-71be33931c93/sprints/22648/topics/6709b207-cbe3-4795-8252-619533575f8e/lessons/6b1eb550-b81c-48c5-a843-7bafb1838694/" target="_blank">инструменты из прошлого модуля</a>, а главное — свои идеи и решения конкретных сценариев.</div><div class="paragraph">Требования к итоговой архитектуре:</div><ul><li>Для простоты можно рассылать только email-письма, но система должна иметь возможность расширения на другие типы уведомлений: смс, push и другие варианты.</li><li>Мгновенные уведомления должны отправляться с максимальной задержкой в несколько минут.</li><li>В случае падения любого компонента ничего не должно потеряться и любое уведомление должно быть получено клиентом.</li><li>В случае простоя генератора автоматических уведомлений (или аналогичного компонента) после его запуска не должны дублироваться старые и новые события.</li><li>Должна быть возможность настройки уведомлений пользователем, в том числе отключение уведомлений.</li><li>Должна быть единая система шаблонизации email-писем как для автоматических уведомлений, так и для рассылок, созданных менеджером .</li><li>У системы должна быть возможность масштабироваться.</li></ul><h2>Полезные ссылки</h2><ul><li><a href="https://medium.com/swlh/architecting-a-scalable-notification-service-778c6fb3ac28" target="_blank">Статья Architecting a Scalable Notification Service</a> на английском</li><li><a href="https://habr.com/ru/company/ispsystem/blog/504934/" target="_blank">Статья «Как мы написали сервис уведомлений»</a> на русском</li></ul></div>


Источники уведомлений:
1. Любая часть сайта, которая просит отправить мгновенное уведомление.
2. Генератор автоматических событий, который периодически отправляет не мгновенные уведомления.
3. Админ-панель, в которой менеджеры вручную создают рассылки уведомлений пользователям.